<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나이와 성별에 따라 팀 나누기</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 25vh;
        }
        #result {
            margin-top: 20px;
            text-align: center;
        }
        .team {
            display: inline-block;
            vertical-align: top;
            margin: 0 10px;
            padding: 10px;
            border: 1px solid #ccc;
            width: 200px; /* 각 팀의 너비 지정 */
            box-sizing: border-box;
        }
        .team h3 {
            margin-top: 0;
        }
        .team p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="memberForms">
            <h2>나이와 성별에 따라 팀 나누기</h2>
            <button onclick="divideTeams()">팀 나누기</button>
        </div>
    </div>

    <div id="result">
        <!-- 결과가 여기에 표시됩니다 -->
    </div>

    <script>
        var members = [
            { name: '김연휘', age: 43, gender: 'female' },
            { name: '강민경', age: 37, gender: 'female' },
            { name: '임소명', age: 34, gender: 'female' },
            { name: '이용희', age: 27, gender: 'female' },
            { name: '성수린', age: 26, gender: 'female' },
            { name: '이승연', age: 25, gender: 'female' },
            { name: '한민주', age: 23, gender: 'female' },
            { name: '박규열', age: 62, gender: 'male' },
            { name: '이정훈', age: 57, gender: 'male' },
            { name: '최경호', age: 57, gender: 'male' },
            { name: '전승원', age: 56, gender: 'male' },
            { name: '한준섭', age: 55, gender: 'male' },
            { name: '양대경', age: 55, gender: 'male' },
            { name: '최순호', age: 55, gender: 'male' },
            { name: '김영준', age: 53, gender: 'male' },
            { name: '하성우', age: 52, gender: 'male' },
            { name: '윤태형', age: 51, gender: 'male' },
            { name: '김경호', age: 48, gender: 'male' },
            { name: '송의용', age: 47, gender: 'male' },
            { name: '오영진', age: 46, gender: 'male' },
            { name: '조홍득', age: 44, gender: 'male' },
            { name: '이두진', age: 38, gender: 'male' },
            { name: '유세원', age: 37, gender: 'male' },
            { name: '윤병준', age: 36, gender: 'male' },
            { name: '박수환', age: 36, gender: 'male' },
            { name: '김민건', age: 33, gender: 'male' },
            { name: '박진솔', age: 32, gender: 'male' },
            { name: '박성민', age: 32, gender: 'male' },
            { name: '권도연', age: 32, gender: 'male' },
            { name: '이광우', age: 31, gender: 'male' },
            { name: '고은성', age: 31, gender: 'male' },
            { name: '주만근', age: 30, gender: 'male' },
            { name: '송현민', age: 30, gender: 'male' },
            { name: '김현영', age: 30, gender: 'male' },
            { name: '가이랏', age: 30, gender: 'male' },
            { name: '조현민', age: 29, gender: 'male' },
            { name: '오경수', age: 28, gender: 'male' },
            { name: '지명훈', age: 26, gender: 'male' },
            { name: '신성현', age: 23, gender: 'male' }
        ];

        function shuffle(array) {
            var currentIndex = array.length, temporaryValue, randomIndex;

            // While there remain elements to shuffle...
            while (0 !== currentIndex) {

                // Pick a remaining element...
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;

                // And swap it with the current element.
                temporaryValue = array[currentIndex];
                array[currentIndex] = array[randomIndex];
                array[randomIndex] = temporaryValue;
            }

            return array;
        }

        function divideTeams() {
            var totalMembers = members.length;

            // 멤버들을 랜덤으로 섞음
            shuffle(members);

            // 각 팀에 할당될 인원 수 계산 (팀당 10명 또는 9명)
            var teamCounts = [10, 10, 10, 9]; // 각 팀의 인원 수 배열

            // 팀에 배정할 멤버들 초기화
            var teams = [[], [], [], []];
            var currentTeam = 0;

            // 남성과 여성을 번갈아가며 팀에 배정
            var maleIndex = 0;
            var femaleIndex = 0;

            for (var j = 0; j < members.length; j++) {
                if (members[j].gender === 'male') {
                    teams[currentTeam].push(members[j]);
                    maleIndex++;
                } else {
                    // 여성이 한 팀에 최대 1명만 들어가도록 제한
                    if (femaleIndex < teamCounts[currentTeam] * 0.5) {
                        teams[currentTeam].push(members[j]);
                        femaleIndex++;
                    } else {
                        // 다음 팀으로 넘어감
                        if (currentTeam < 3) {
                            currentTeam++;
                            teams[currentTeam].push(members[j]);
                            femaleIndex = 1; // 새로운 팀에 첫 번째 여성으로 시작
                        }
                    }
                }
                // 다음 팀으로 넘어감
                if (teams[currentTeam].length >= teamCounts[currentTeam]) {
                    currentTeam++;
                    maleIndex = 0;
                    femaleIndex = 0;
                }
            }

            // 결과 출력
            var resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';
            for (var k = 0; k < 4; k++) {
                var teamNumber = k + 1;
                var teamHTML = '<div class="team">';
                teamHTML += '<h3>팀 ' + teamNumber + '</h3>';
                teams[k].sort(function(a, b) {
                    // 성별과 나이 순으로 정렬
                    if (a.gender === b.gender) {
                        return a.age - b.age;
                    } else {
                        return a.gender === 'female' ? -1 : 1;
                    }
                });
                for (var m = 0; m < teams[k].length; m++) {
                    teamHTML += '<p>' + teams[k][m].name + ', ' + teams[k][m].age + '세, ' + (teams[k][m].gender === 'male' ? '남성' : '여성') + '</p>';
                }
                teamHTML += '</div>';
                resultDiv.innerHTML += teamHTML;
            }
        }
    </script>
</body>
</html>
